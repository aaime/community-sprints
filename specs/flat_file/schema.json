{
  "$schema": "http://json-schema.org/draft-06/schema#",

  "definitions": {
    "asset": {
      "type": "object",
      "TODO": "allOf to combine core + URI",
      "properties": {
        "uri": {
          "type": "string",
          "format": "uri"
        },
        "sid": {
          "title": "Unique ID",
          "description": "item ID",
          "type": "string"
        },
        "title": {
          "title": "Title",
          "description": "Human-readable item name",
          "type": "string"
        },
        "bbox": {
          "TODO": "geometry/bbox",
          "$ref": "#/definitions/geometry"
        },
        "footprint": {
          "TODO": "Polygon or MultiPolygon",
          "$ref": "#/definitions/geometry"
        },
        "acquisition_start": {
          "title": "Acquisition Date Start",
          "description":
            "First acquisition in UTC (Combined date and time representation)",
          "type": "string",
          "format": "date-time"
        },
        "acquisition_end": {
          "title": "Acquisition Date End",
          "description":
            "Last acquisition in UTC (Combined date and time representation)",
          "type": "string",
          "format": "date-time"
        },
        "product_type": {
          "title": "Product Type",
          "TODO": "is this an enum?",
          "description": "Product types: [eo, sar, model, point-cloud, video]",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "provider": {
          "title": "Provider",
          "description": "Provider name and contact",
          "$ref": "#/definitions/catalog/definitions/entity"
        },
        "license": {
          "title": "Data license",
          "description": "Data license name based on SPDX License List"
        },
        "links": {
          "title": "Resource links",
          "description": "Links to resources, could be download or other URLs",
          "TODO": "array of objects?",
          "type": "object",
          "properties": {
            "TODO": {}
          }
        },
        "version_spec": {
          "title": "Spec version",
          "description": "Semantic versioning number",
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+(?:-[a-z]+(?:[_\\.-]*[a-z0-9]+)*)*$"
        }
      }
    },
    "catalog": {
      "title": "Catalog",
      "type": "object",
      "definitions": {
        "link": {
          "type": "object",
          "properties": {
            "uri": {
              "type": "string",
              "format": "uri"
            },
            "properties": {
              "$ref": "#/definitions/catalog"
            }
          }
        },
        "entity": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "email": {
              "type": "string",
              "format": "email"
            },
            "phone": {
              "type": "string"
            },
            "url": {
              "type": "string",
              "format": "uri"
            }
          }
        }
      },
      "properties": {
        "name": {
          "description": "Name",
          "type": "string"
        },
        "description": {
          "description": "Description",
          "type": "string"
        },
        "license": {
          "description": "License (as an SPDX license string)",
          "type": "string"
        },
        "assets": {
          "description": "Assets",
          "type": "array",
          "items": {
            "$ref": "#/definitions/asset"
          }
        },
        "links": {
          "description": "Links to other catalogs",
          "type": "array",
          "items": {
            "$ref": "#/definitions/catalog/definitions/link"
          }
        },
        "contact": {
          "$ref": "#/definitions/catalog/definitions/entity"
        },
        "formats": {
          "description": "Included asset formats",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "keywords": {
          "description": "Keywords",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "homepage": {
          "type": "string"
        },
        "geometry": {
          "TODO": "Polygon or MultiPolygon",
          "$ref": "#/definitions/geometry"
        },
        "startDate": {
          "type": "string",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "format": "date-time"
        },
        "date": {
          "type": "string",
          "format": "date-time"
        },
        "provider": {
          "description": "Provider-specific properties",
          "type": "object"
        }
      }
    },
    "geometry": {
      "id": "http://json-schema.org/geojson/geometry.json#",
      "title": "geometry",
      "description": "One geometry as defined by GeoJSON",
      "type": "object",
      "definitions": {
        "position": {
          "description": "A single position",
          "type": "array",
          "minItems": 2,
          "items": [{ "type": "number" }, { "type": "number" }],
          "additionalItems": false
        },
        "positionArray": {
          "description": "An array of positions",
          "type": "array",
          "items": { "$ref": "#/definitions/position" }
        },
        "lineString": {
          "description": "An array of two or more positions",
          "allOf": [
            { "$ref": "#/definitions/positionArray" },
            { "minItems": 2 }
          ]
        },
        "linearRing": {
          "description":
            "An array of four positions where the first equals the last",
          "allOf": [
            { "$ref": "#/definitions/positionArray" },
            { "minItems": 4 }
          ]
        },
        "polygon": {
          "description": "An array of linear rings",
          "type": "array",
          "items": { "$ref": "#/definitions/linearRing" }
        }
      },
      "required": ["type", "coordinates"],
      "oneOf": [
        {
          "title": "Point",
          "properties": {
            "type": { "enum": ["Point"] },
            "coordinates": { "$ref": "#/definitions/position" }
          }
        },
        {
          "title": "MultiPoint",
          "properties": {
            "type": { "enum": ["MultiPoint"] },
            "coordinates": { "$ref": "#/definitions/positionArray" }
          }
        },
        {
          "title": "LineString",
          "properties": {
            "type": { "enum": ["LineString"] },
            "coordinates": { "$ref": "#/definitions/lineString" }
          }
        },
        {
          "title": "MultiLineString",
          "properties": {
            "type": { "enum": ["MultiLineString"] },
            "coordinates": {
              "type": "array",
              "items": { "$ref": "#/definitions/lineString" }
            }
          }
        },
        {
          "title": "Polygon",
          "properties": {
            "type": { "enum": ["Polygon"] },
            "coordinates": { "$ref": "#/definitions/polygon" }
          }
        },
        {
          "title": "MultiPolygon",
          "properties": {
            "type": { "enum": ["MultiPolygon"] },
            "coordinates": {
              "type": "array",
              "items": { "$ref": "#/definitions/polygon" }
            }
          }
        }
      ]
    }
  },
  "allOf": [
    {
      "$ref": "#/definitions/catalog"
    },
    {
      "required": ["name", "description", "license", "assets", "links"]
    }
  ]
}
